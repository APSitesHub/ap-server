# Altegio Appointments Sync Scripts

–¶–µ–π –Ω–∞–±—ñ—Ä —Å–∫—Ä–∏–ø—Ç—ñ–≤ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑–∞–ø–∏—Å—ñ–≤ (appointments) –∑ Altegio API –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö MongoDB.

## –§–∞–π–ª–∏

1. **fetchAllAppointments.js** - –û—Å–Ω–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ –∑ Altegio API
2. **syncAppointments.js** - CLI —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
3. **runSync.js** - –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
4. **statsCheck.js** - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–∞ –æ—á–∏—Å—Ç–∫–∏ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
5. **validateData.js** - –°–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –∞–±–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:

```bash
ALTEGIO_COMPANY_ID=your_company_id
ALTEGIO_COMPANY_TOKEN=your_company_token
ALTEGIO_USER_TOKEN=your_user_token
DB_URI=mongodb://localhost:27017/your_database
```

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞–∫–µ—Ç–∏:

```bash
npm install axios luxon dotenv mongoose
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –∑ npm scripts

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
npm run sync-appointments today

# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞ –º–∏–Ω—É–ª–∏–π —Ç–∏–∂–¥–µ–Ω—å  
npm run sync-appointments last-week

# –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º
npm run sync-appointments-interactive

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
npm run appointments-stats

# –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
npm run appointments-validate

# –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
npm run appointments-clean
```

### üìã –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

#### 1. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è appointments

**–®–≤–∏–¥–∫—ñ –æ–ø—Ü—ñ—ó:**
```bash
# –ó–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
node scripts/altegioAppointments/syncAppointments.js today

# –ó–∞ –≤—á–æ—Ä–∞
node scripts/altegioAppointments/syncAppointments.js yesterday

# –ó–∞ –ø–æ—Ç–æ—á–Ω–∏–π —Ç–∏–∂–¥–µ–Ω—å
node scripts/altegioAppointments/syncAppointments.js this-week

# –ó–∞ –º–∏–Ω—É–ª–∏–π —Ç–∏–∂–¥–µ–Ω—å
node scripts/altegioAppointments/syncAppointments.js last-week

# –ó–∞ –ø–æ—Ç–æ—á–Ω–∏–π –º—ñ—Å—è—Ü—å
node scripts/altegioAppointments/syncAppointments.js this-month

# –ó–∞ –º–∏–Ω—É–ª–∏–π –º—ñ—Å—è—Ü—å
node scripts/altegioAppointments/syncAppointments.js last-month
```

**–ö–∞—Å—Ç–æ–º–Ω–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω –¥–∞—Ç:**
```bash
# –°—ñ—á–µ–Ω—å 2025
node scripts/altegioAppointments/syncAppointments.js 2025-01-01 2025-01-31

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –¥–∞—Ç–∞
node scripts/altegioAppointments/syncAppointments.js 2025-01-15 2025-01-15
```

#### 2. –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º

```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —ñ –≤–≤–µ–¥—ñ—Ç—å –¥–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
node scripts/altegioAppointments/runSync.js

# –ê–±–æ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
node scripts/altegioAppointments/runSync.js 2025-01-01 2025-01-31
```

#### 3. –ê–Ω–∞–ª—ñ–∑ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
node scripts/altegioAppointments/statsCheck.js

# –û—á–∏—Å—Ç–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏
node scripts/altegioAppointments/statsCheck.js --clean
```

#### 4. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö
node scripts/altegioAppointments/validateData.js

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏
node scripts/altegioAppointments/validateData.js --fix
```

### üìä –ü—Ä–∏–∫–ª–∞–¥ —Ç–∏–ø–æ–≤–æ–≥–æ workflow

```bash
# 1. –°–ø–æ—á–∞—Ç–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î–º–æ –¥–∞–Ω—ñ
npm run sync-appointments last-month

# 2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
npm run appointments-stats

# 3. –í–∞–ª—ñ–¥—É—î–º–æ –¥–∞–Ω—ñ
npm run appointments-validate

# 4. –ü—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –æ—á–∏—â–∞—î–º–æ –¥—É–±–ª—ñ–∫–∞—Ç–∏
npm run appointments-clean

# 5. –ü–æ–≤—Ç–æ—Ä–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
npm run appointments-validate
```

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### –©–æ —Ä–æ–±–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:

1. **–í–∏—Ç—è–≥—É—î –∑–∞–ø–∏—Å–∏ –∑ Altegio API** –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º rate limiting (–º–∞–∫—Å–∏–º—É–º 4 –∑–∞–ø–∏—Ç–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—É)
2. **–§—ñ–ª—å—Ç—Ä—É—î —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —É—Ä–æ–∫–∏** –∑–∞ —Å–ø–∏—Å–∫–æ–º —Å–µ—Ä–≤—ñ—Å—ñ–≤  
3. **–ü–∞—Ä—Å–∏—Ç—å —ñ–º'—è –∫–ª—ñ—î–Ω—Ç–∞** –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è CRM ID —Ç–∞ —ñ–º–µ–Ω—ñ
4. **–ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞ –¥—É–±–ª—ñ** –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º –≤ –ë–î
5. **–ó–±–µ—Ä—ñ–≥–∞—î –≤ MongoDB** —Ç—ñ–ª—å–∫–∏ –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏
6. **–û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏** —Ç–∞ –ª–æ–≥—É—î –ø—Ä–æ—Ü–µ—Å

### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è:

- ‚úÖ –¢—ñ–ª—å–∫–∏ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —É—Ä–æ–∫–∏ (–∑–∞ —Å–ø–∏—Å–∫–æ–º service ID)
- ‚úÖ –¢—ñ–ª—å–∫–∏ –∑–∞–ø–∏—Å–∏ –∑ CRM ID –≤ —ñ–º–µ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞  
- ‚úÖ –í–∏–∫–ª—é—á–∞—î –¥—É–±–ª—ñ–∫–∞—Ç–∏ (–ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø–æ `appointmentId`)
- ‚úÖ –í–∫–ª—é—á–∞—î –≤–∏–¥–∞–ª–µ–Ω—ñ –∑–∞–ø–∏—Å–∏ (–∑ –ø—Ä–∞–ø–æ—Ä—Ü–µ–º `isDeleted`)

### Rate Limiting:

- üö¶ –ú–∞–∫—Å–∏–º—É–º 4 –∑–∞–ø–∏—Ç–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—É –¥–æ Altegio API
- üì¶ –ü–æ 50 –∑–∞–ø–∏—Å—ñ–≤ –∑–∞ –∑–∞–ø–∏—Ç (–º–∞–∫—Å–∏–º—É–º –¥–æ–∑–≤–æ–ª–µ–Ω–∏–π API)
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤—Å—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤

### –õ–æ–≥—É–≤–∞–Ω–Ω—è:

–°–∫—Ä–∏–ø—Ç –≤–∏–≤–æ–¥–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ—Ü–µ—Å:
- üìä –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–±—Ä–æ–±–ª–µ–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫
- üìà –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ –Ω–∞ –∫–æ–∂–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ  
- üíæ –ó–±–µ—Ä–µ–∂–µ–Ω—ñ —Ç–∞ –ø—Ä–æ–ø—É—â–µ–Ω—ñ –∑–∞–ø–∏—Å–∏
- üìã –ü—ñ–¥—Å—É–º–∫–æ–≤–∏–π –∑–≤—ñ—Ç –∑ –¥–µ—Ç–∞–ª—å–Ω–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

–°–∫—Ä–∏–ø—Ç –∑–±–µ—Ä—ñ–≥–∞—î –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó `altegio-appointments` –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –ø–æ–ª—è–º–∏:

```javascript
{
  appointmentId: String,     // ID –∑–∞–ø–∏—Å—É –≤ Altegio
  leadId: String,           // CRM ID –∫–ª—ñ—î–Ω—Ç–∞ (–∑ —ñ–º–µ–Ω—ñ)
  leadName: String,         // –Ü–º'—è –∫–ª—ñ—î–Ω—Ç–∞ (–±–µ–∑ CRM ID)
  teacherId: String,        // ID –≤—á–∏—Ç–µ–ª—è
  teacherName: String,      // –Ü–º'—è –≤—á–∏—Ç–µ–ª—è
  serviceId: String,        // ID —Å–µ—Ä–≤—ñ—Å—É
  serviceName: String,      // –ù–∞–∑–≤–∞ —Å–µ—Ä–≤—ñ—Å—É
  startDateTime: Date,      // –ß–∞—Å –ø–æ—á–∞—Ç–∫—É —É—Ä–æ–∫—É
  endDateTime: Date,        // –ß–∞—Å –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —É—Ä–æ–∫—É
  status: String,           // –°—Ç–∞—Ç—É—Å –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è (0,1,-1,2)
  IsTrial: Boolean,         // –ß–∏ —Ü–µ –ø—Ä–æ–±–Ω–∏–π —É—Ä–æ–∫
  isDeleted: Boolean,       // –ß–∏ –≤–∏–¥–∞–ª–µ–Ω–∏–π –∑–∞–ø–∏—Å
  createdAt: Date,          // –ß–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ –ë–î
  updatedAt: Date           // –ß–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ –ë–î
}
```

## –°—Ç–∞—Ç—É—Å–∏ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è

- `0` - **Pending** (–û—á—ñ–∫—É—î—Ç—å—Å—è)
- `1` - **Arrived** (–ü—Ä–∏–π—à–æ–≤)  
- `-1` - **No-show** (–ù–µ –∑'—è–≤–∏–≤—Å—è)
- `2` - **Confirmed** (–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ)

## –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (statsCheck.js)

- –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å appointments
- –†–æ–∑–ø–æ–¥—ñ–ª –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è
- –¢–æ–ø-5 –≤—á–∏—Ç–µ–ª—ñ–≤ —Ç–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∞—Ç–∞—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª—ñ–∫–∞—Ç–∏

### üîç –í–∞–ª—ñ–¥–∞—Ü—ñ—è (validateData.js)

- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∞—Ç—É –¥–∞—Ç —Ç–∞ ID
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–∫–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤
- –í–∏—è–≤–ª–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π –≤ –¥–∞–Ω–∏—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

## –ü–æ–º–∏–ª–∫–∏ —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏:

1. **"Missing required environment variables"** - –ù–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
2. **"Invalid date format"** - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç–∏
3. **"Teacher not found"** - –í—á–∏—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º—ñ
4. **"Error fetching appointments"** - –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ –¥–æ Altegio API
5. **"Rate limit exceeded"** - –ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç –∑–∞–ø–∏—Ç—ñ–≤

### –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
echo $ALTEGIO_COMPANY_ID
echo $ALTEGIO_COMPANY_TOKEN  
echo $ALTEGIO_USER_TOKEN

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î
npm run appointments-stats

# –í–∞–ª—ñ–¥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ
npm run appointments-validate
```

### –õ–æ–≥–∏:

–°–∫—Ä–∏–ø—Ç –≤–∏–≤–æ–¥–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏, —è–∫—ñ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –≤—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏:
- ‚úÖ –Ø–∫—ñ –∑–∞–ø–∏—Å–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è
- ‚è≠Ô∏è –Ø–∫—ñ –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è —Ç–∞ —á–æ–º—É  
- ‚ùå –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ
- üìà –ü—Ä–æ–≥—Ä–µ—Å –æ–±—Ä–æ–±–∫–∏

## –û–±–º–µ–∂–µ–Ω–Ω—è

1. **Rate Limiting**: 4 –∑–∞–ø–∏—Ç–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—É –¥–æ Altegio API
2. **Pagination**: –ú–∞–∫—Å–∏–º—É–º 50 –∑–∞–ø–∏—Å—ñ–≤ –∑–∞ –∑–∞–ø–∏—Ç
3. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è**: –¢—ñ–ª—å–∫–∏ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —É—Ä–æ–∫–∏ –∑–∞ —Å–ø–∏—Å–∫–æ–º —Å–µ—Ä–≤—ñ—Å—ñ–≤
4. **CRM ID**: –û–±–æ–≤'—è–∑–∫–æ–≤–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å CRM ID –≤ —ñ–º–µ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞

## –ë–µ–∑–ø–µ–∫–∞

- üîí –í—Å—ñ —Ç–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è
- üõ°Ô∏è –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑–∞–ø–æ–±—ñ–≥–∞—î –≤–∏—Ç–æ–∫—É –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó  
- üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö
- üîç –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º

## –†–æ–∑—à–∏—Ä–µ–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ cron jobs

```bash
# –î–æ–¥–∞–π—Ç–µ –≤ crontab –¥–ª—è —â–æ–¥–µ–Ω–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
0 2 * * * cd /path/to/ap-server && npm run sync-appointments yesterday

# –©–æ—Ç–∏–∂–Ω–µ–≤–∞ –ø–æ–≤–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è
0 3 * * 1 cd /path/to/ap-server && npm run sync-appointments last-week
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É
0 * * * * cd /path/to/ap-server && npm run appointments-stats | grep "ERROR\|WARNING"
```

### –ë–µ–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏

```bash
# –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è —Ä–æ–±–∏—Ç–∏ –±–µ–∫–∞–ø –ø–µ—Ä–µ–¥ –º–∞—Å–æ–≤–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏
mongodump --db your_database --collection altegio-appointments
```
